{% extends 'base.html' %}

{% block content %}
    <div style="margin: 20px;">
        <h1>Equinos Data Centre</h1>

        <div style="margin-top: 20px;">
            <h5>Username:</h5>
            <p>{{ username }}</p>

            <h5>Class:</h5>
            <p>{{ class }}</p>
        </div>

        <!-- Tabel Karakter -->
        <h2 style="margin-top: 40px;">Character List</h2>
        <p>Kamu memiliki {{ jumlah_character }} karakter pada aplikasi ini.</p>
        <table style="width: 100%; border: 1px solid black; margin-top: 10px;">
            <tr>
                <th style="border: 1px solid black; padding: 10px;">Name</th>
                <th style="border: 1px solid black; padding: 10px;">Level</th>
            </tr>
            {% for character in characters %}
                <tr>
                    <td style="border: 1px solid black; padding: 10px;">{{ character.name }}</td>
                    <td style="border: 1px solid black; padding: 10px;">{{ character.level }}</td>
                </tr>
            {% endfor %}
        </table>
        <a href="{% url 'main:create_character' %}">
            <button style="margin-top: 10px;">Add New Character</button>
        </a>

        <!-- Form Create Item -->
        <h2 style="margin-top: 40px;">Create New Item</h2>
        <form method="post" enctype="multipart/form-data" action="{% url 'main:create_item' %}">
            {% csrf_token %}
            {{ item_form.as_p }}
            <select name="owner" style="margin-top: 10px;">
                <option value="" disabled selected>Select Character</option>
                {% for character in characters %}
                    <option value="{{ character.id }}">{{ character.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" style="margin-top: 10px;">Create Item</button>
        </form>

       <!-- Item List -->
<h2 style="margin-top: 40px;">Item List</h2>
<p>Kamu menyimpan {{ jumlah_item }} jenis item pada aplikasi ini.</p>
<table style="border-collapse: collapse; width: 100%; border: 1px solid #000;">
    <tr>
        <th style="border: 1px solid #000; padding: 10px;">Name</th>
        <th style="border: 1px solid #000; padding: 10px;">Amount</th>
        <th style="border: 1px solid #000; padding: 10px;">Description</th>
        <th style="border: 1px solid #000; padding: 10px;">Owner</th>
        <th style="border: 1px solid #000; padding: 10px;">Actions</th>
    </tr>
    {% for item in items %}
        <tr>
            <td style="border: 1px solid #000; padding: 10px;">{{ item.name }}</td>
            <td style="border: 1px solid #000; padding: 10px;">{{ item.amount }}</td>
            <td style="border: 1px solid #000; padding: 10px;">{{ item.description }}</td>
            <td style="border: 1px solid #000; padding: 10px;">
                {% if item.owner %}
                    {{ item.owner.name }}
                {% else %}
                    None
                {% endif %}
            </td>
            <td style="border: 1px solid #000; padding: 10px;">
                <form method="post" action="{% url 'main:add_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit">Tambah</button>
                </form>
                <form method="post" action="{% url 'main:reduce_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit">Kurang</button>
                </form>
                <form method="post" action="{% url 'main:delete_item' item.id %}">
                    {% csrf_token %}
                    <button type="submit">Hapus</button>
                </form>
            </td>
        </tr>
    {% endfor %}
</table>
<h5>Sesi terakhir login: {{ last_login }}</h5>

    <!-- Tombol Logout -->
    <a href="{% url 'main:logout' %}" style="margin-top: 20px;">
        <button>
            Logout
        </button>
    </a>
    </div>
{% endblock content %}
